<ui:composition  template="main-template.xhtml"
                 xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:h="http://xmlns.jcp.org/jsf/html"
                 xmlns:f="http://xmlns.jcp.org/jsf/core"
                 xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                 xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:define name="title">Buy Ticket</ui:define>

    <ui:define name="content">
        <f:view> 
            <f:metadata>
                <f:viewParam id="time" name="time" value="#{movieBean.id}"></f:viewParam>  
            </f:metadata> 
            <div class="theaters">
                <div class="page-header jumbotron">
                    <h3>
                        <h:outputLabel  rendered="#{movieBean.id == null}"> 
                            No movie selected
                        </h:outputLabel> 

                        <h:outputLabel  rendered="#{movieBean.id != null}"> 
                            #{movieBean.title} 
                        </h:outputLabel> 
                        <br/>
                        <h:outputLabel  rendered="#{theaterBean.zipcode == null}"> 
                            No Theater Selected
                        </h:outputLabel>  

                        <h:outputLabel  rendered="#{theaterBean.zipcode != null}"> 
                            Theater: #{theaterBean.city} #{theaterBean.zipcode} 
                        </h:outputLabel> 
                    </h3> 
                </div>
                <h:outputLabel  rendered="#{movieBean.id != null &amp;&amp; theaterBean.zipcode != null}"> 
                    <div class="row">  
                        <div class="col col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h3>Payment Details</h3>     
                                </div>
                                <div class="card-block"> 
                                    <h:form>
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <div class="form-group">
                                                    <label for="cardNumber">CARD NUMBER</label>
                                                    <div class="input-group">
                                                        <h:inputText  id="cardnumber" 
                                                                      a:placeholder="Valid card number" 
                                                                      styleClass="form-control"  
                                                                      validatorMessage="Please enter digits only."
                                                                      converterMessage="Please enter digits only." required="true" >
                                                            <f:validateLength minimum="16" maximum="16" />
                                                            <f:validateRegex pattern="[0-9]+" />
                                                        </h:inputText>
                                                        <span class="input-group-addon"><i class="fa fa-credit-card"></i></span>
                                                    </div>
                                                </div>                            
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-7 col-md-7">
                                                <div class="form-group">
                                                    <label for="cardExpiry"><span class="hidden-xs">EXPIRATION</span><span class="visible-xs-inline">EXP</span> DATE</label>
                                                    <h:inputText  id="cardExpiry" 
                                                                  a:placeholder="MM/YY" 
                                                                  styleClass="form-control"  
                                                                  validatorMessage="Please enter in the correct format MM/YY"
                                                                  converterMessage="Please enter in the correct format MM/YY"  required="true">
                                                        <f:validateLength minimum="5" maximum="5" /> 
                                                        <f:validateRegex pattern="[0-9][0-9]/[0-9][0-9]" />
                                                    </h:inputText> 
                                                </div>
                                            </div>
                                            <div class="col-xs-5 col-md-5 pull-right">
                                                <div class="form-group">
                                                    <label for="cardCVC">CV CODE</label>
                                                    <h:inputText  id="code" 
                                                                  a:placeholder="xxx" 
                                                                  styleClass="form-control"  
                                                                  validatorMessage="Please enter 3 digits only"
                                                                  converterMessage="Please enter 3 digits only" required="true">
                                                        <f:validateLength minimum="3" maximum="3" /> 
                                                        <f:validateRegex pattern="[0-9]+" />
                                                    </h:inputText> 
                                                </div>
                                            </div>
                                        </div> 
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <h:commandButton styleClass="btn btn-danger btn-block"  
                                                                 action="#{theaterController.findTheaters}" 
                                                                 value="Buy Ticket" id="search">

                                                </h:commandButton>    </div>
                                        </div> 
                                    </h:form>
                                </div>

                                <div class="alert alert-danger" role="alert">
                                    <strong><h:message showSummary="true" showDetail="false" for="cardnumber"/></strong><br/>
                                    <strong><h:message showSummary="true" showDetail="false" for="cardExpiry"/></strong><br/>
                                    <strong><h:message showSummary="true" showDetail="false" for="code"/></strong><br/>
                                </div>
                            </div>            
                            <!-- CREDIT CARD FORM ENDS HERE -->
                        </div>
                    </div>
                </h:outputLabel> 
            </div>  
        </f:view> 
    </ui:define>

</ui:composition>

